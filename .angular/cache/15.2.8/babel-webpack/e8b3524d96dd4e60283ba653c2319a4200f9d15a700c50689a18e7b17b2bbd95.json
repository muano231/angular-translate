{"ast":null,"code":"import _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nvar arr = [];\nvar each = arr.forEach;\nvar slice = arr.slice;\nfunction defaults(obj) {\n  each.call(slice.call(arguments, 1), function (source) {\n    if (source) {\n      for (var prop in source) {\n        if (obj[prop] === undefined) obj[prop] = source[prop];\n      }\n    }\n  });\n  return obj;\n}\nfunction createClassOnDemand(ClassOrObject) {\n  if (!ClassOrObject) return null;\n  if (typeof ClassOrObject === 'function') return new ClassOrObject();\n  return ClassOrObject;\n}\nfunction getDefaults() {\n  return {\n    handleEmptyResourcesAsFailed: true\n  };\n}\nvar Backend = /*#__PURE__*/function () {\n  function Backend(services) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Backend);\n    this.backends = [];\n    this.type = 'backend';\n    this.init(services, options);\n  }\n  _createClass(Backend, [{\n    key: \"init\",\n    value: function init(services) {\n      var _this = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var i18nextOptions = arguments.length > 2 ? arguments[2] : undefined;\n      this.services = services;\n      this.options = defaults(options, this.options || {}, getDefaults());\n      this.options.backends && this.options.backends.forEach(function (b, i) {\n        _this.backends[i] = _this.backends[i] || createClassOnDemand(b);\n        _this.backends[i].init(services, _this.options.backendOptions && _this.options.backendOptions[i] || {}, i18nextOptions);\n      });\n    }\n  }, {\n    key: \"read\",\n    value: function read(language, namespace, callback) {\n      var _this2 = this;\n      var bLen = this.backends.length;\n      var loadPosition = function loadPosition(pos) {\n        if (pos >= bLen) return callback(new Error('non of the backend loaded data;', true)); // failed pass retry flag\n        var isLastBackend = pos === bLen - 1;\n        var lengthCheckAmount = _this2.options.handleEmptyResourcesAsFailed && !isLastBackend ? 0 : -1;\n        var backend = _this2.backends[pos];\n        if (backend.read) {\n          var resolver = function resolver(err, data) {\n            if (!err && data && Object.keys(data).length > lengthCheckAmount) {\n              callback(null, data, pos);\n              savePosition(pos - 1, data); // save one in front\n            } else {\n              loadPosition(pos + 1); // try load from next\n            }\n          };\n\n          var fc = backend.read.bind(backend);\n          if (fc.length === 2) {\n            // no callback\n            try {\n              var r = fc(language, namespace);\n              if (r && typeof r.then === 'function') {\n                // promise\n                r.then(function (data) {\n                  return resolver(null, data);\n                })[\"catch\"](resolver);\n              } else {\n                // sync\n                resolver(null, r);\n              }\n            } catch (err) {\n              resolver(err);\n            }\n            return;\n          }\n\n          // normal with callback\n          fc(language, namespace, resolver);\n        } else {\n          loadPosition(pos + 1); // try load from next\n        }\n      };\n\n      var savePosition = function savePosition(pos, data) {\n        if (pos < 0) return;\n        var backend = _this2.backends[pos];\n        if (backend.save) {\n          backend.save(language, namespace, data);\n          savePosition(pos - 1, data);\n        } else {\n          savePosition(pos - 1, data);\n        }\n      };\n      loadPosition(0);\n    }\n  }, {\n    key: \"create\",\n    value: function create(languages, namespace, key, fallbackValue) {\n      var clb = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : function () {};\n      var opts = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n      this.backends.forEach(function (b) {\n        if (!b.create) return;\n        var fc = b.create.bind(b);\n        if (fc.length < 6) {\n          // no callback\n          try {\n            var r;\n            if (fc.length === 5) {\n              // future callback-less api for i18next-locize-backend\n              r = fc(languages, namespace, key, fallbackValue, opts);\n            } else {\n              r = fc(languages, namespace, key, fallbackValue);\n            }\n            if (r && typeof r.then === 'function') {\n              // promise\n              r.then(function (data) {\n                return clb(null, data);\n              })[\"catch\"](clb);\n            } else {\n              // sync\n              clb(null, r);\n            }\n          } catch (err) {\n            clb(err);\n          }\n          return;\n        }\n\n        // normal with callback\n        fc(languages, namespace, key, fallbackValue, clb /* unused callback */, opts);\n      });\n    }\n  }]);\n  return Backend;\n}();\nBackend.type = 'backend';\nexport { Backend as default };","map":{"version":3,"names":["_classCallCheck","_createClass","arr","each","forEach","slice","defaults","obj","call","arguments","source","prop","undefined","createClassOnDemand","ClassOrObject","getDefaults","handleEmptyResourcesAsFailed","Backend","services","options","length","backends","type","init","key","value","_this","i18nextOptions","b","i","backendOptions","read","language","namespace","callback","_this2","bLen","loadPosition","pos","Error","isLastBackend","lengthCheckAmount","backend","resolver","err","data","Object","keys","savePosition","fc","bind","r","then","save","create","languages","fallbackValue","clb","opts","default"],"sources":["C:/Users/LEO/Desktop/Leo/angular-translate/node_modules/i18next-chained-backend/dist/esm/i18nextChainedBackend.js"],"sourcesContent":["import _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\n\nvar arr = [];\nvar each = arr.forEach;\nvar slice = arr.slice;\nfunction defaults(obj) {\n  each.call(slice.call(arguments, 1), function (source) {\n    if (source) {\n      for (var prop in source) {\n        if (obj[prop] === undefined) obj[prop] = source[prop];\n      }\n    }\n  });\n  return obj;\n}\nfunction createClassOnDemand(ClassOrObject) {\n  if (!ClassOrObject) return null;\n  if (typeof ClassOrObject === 'function') return new ClassOrObject();\n  return ClassOrObject;\n}\n\nfunction getDefaults() {\n  return {\n    handleEmptyResourcesAsFailed: true\n  };\n}\nvar Backend = /*#__PURE__*/function () {\n  function Backend(services) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    _classCallCheck(this, Backend);\n    this.backends = [];\n    this.type = 'backend';\n    this.init(services, options);\n  }\n  _createClass(Backend, [{\n    key: \"init\",\n    value: function init(services) {\n      var _this = this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var i18nextOptions = arguments.length > 2 ? arguments[2] : undefined;\n      this.services = services;\n      this.options = defaults(options, this.options || {}, getDefaults());\n      this.options.backends && this.options.backends.forEach(function (b, i) {\n        _this.backends[i] = _this.backends[i] || createClassOnDemand(b);\n        _this.backends[i].init(services, _this.options.backendOptions && _this.options.backendOptions[i] || {}, i18nextOptions);\n      });\n    }\n  }, {\n    key: \"read\",\n    value: function read(language, namespace, callback) {\n      var _this2 = this;\n      var bLen = this.backends.length;\n      var loadPosition = function loadPosition(pos) {\n        if (pos >= bLen) return callback(new Error('non of the backend loaded data;', true)); // failed pass retry flag\n        var isLastBackend = pos === bLen - 1;\n        var lengthCheckAmount = _this2.options.handleEmptyResourcesAsFailed && !isLastBackend ? 0 : -1;\n        var backend = _this2.backends[pos];\n        if (backend.read) {\n          var resolver = function resolver(err, data) {\n            if (!err && data && Object.keys(data).length > lengthCheckAmount) {\n              callback(null, data, pos);\n              savePosition(pos - 1, data); // save one in front\n            } else {\n              loadPosition(pos + 1); // try load from next\n            }\n          };\n\n          var fc = backend.read.bind(backend);\n          if (fc.length === 2) {\n            // no callback\n            try {\n              var r = fc(language, namespace);\n              if (r && typeof r.then === 'function') {\n                // promise\n                r.then(function (data) {\n                  return resolver(null, data);\n                })[\"catch\"](resolver);\n              } else {\n                // sync\n                resolver(null, r);\n              }\n            } catch (err) {\n              resolver(err);\n            }\n            return;\n          }\n\n          // normal with callback\n          fc(language, namespace, resolver);\n        } else {\n          loadPosition(pos + 1); // try load from next\n        }\n      };\n\n      var savePosition = function savePosition(pos, data) {\n        if (pos < 0) return;\n        var backend = _this2.backends[pos];\n        if (backend.save) {\n          backend.save(language, namespace, data);\n          savePosition(pos - 1, data);\n        } else {\n          savePosition(pos - 1, data);\n        }\n      };\n      loadPosition(0);\n    }\n  }, {\n    key: \"create\",\n    value: function create(languages, namespace, key, fallbackValue) {\n      var clb = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : function () {};\n      var opts = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n      this.backends.forEach(function (b) {\n        if (!b.create) return;\n        var fc = b.create.bind(b);\n        if (fc.length < 6) {\n          // no callback\n          try {\n            var r;\n            if (fc.length === 5) {\n              // future callback-less api for i18next-locize-backend\n              r = fc(languages, namespace, key, fallbackValue, opts);\n            } else {\n              r = fc(languages, namespace, key, fallbackValue);\n            }\n            if (r && typeof r.then === 'function') {\n              // promise\n              r.then(function (data) {\n                return clb(null, data);\n              })[\"catch\"](clb);\n            } else {\n              // sync\n              clb(null, r);\n            }\n          } catch (err) {\n            clb(err);\n          }\n          return;\n        }\n\n        // normal with callback\n        fc(languages, namespace, key, fallbackValue, clb /* unused callback */, opts);\n      });\n    }\n  }]);\n  return Backend;\n}();\nBackend.type = 'backend';\n\nexport { Backend as default };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}