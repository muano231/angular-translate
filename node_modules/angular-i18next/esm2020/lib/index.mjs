import { NgModule } from '@angular/core';
import * as i18n from 'i18next';
import { I18NextCapPipe } from './I18NextCapPipe';
import { I18NextEagerPipe } from './I18NextEagerPipe';
import { NativeErrorHandlingStrategy } from './I18NextErrorHandlingStrategies';
import { I18NextFormatPipe } from './I18NextFormatPipe';
import { I18NextPipe } from './I18NextPipe';
import { I18NextService } from './I18NextService';
import { I18NextTitle } from './I18NextTitle';
import { I18NEXT_ERROR_HANDLING_STRATEGY, I18NEXT_NAMESPACE, I18NEXT_NAMESPACE_RESOLVER, I18NEXT_SCOPE, I18NEXT_SERVICE } from './I18NEXT_TOKENS';
import { I18NEXT_INSTANCE } from './I18NEXT_TOKENS';
import * as i0 from "@angular/core";
export * from './I18NextCapPipe';
export * from './I18NextEagerPipe';
export * from './I18NextErrorHandlingStrategies';
export * from './I18NextFormatPipe';
export * from './I18NextLoadResult';
export * from './I18NextModuleParams';
export * from './I18NextPipe';
export * from './I18NextService';
export * from './I18NextTitle';
export * from './I18NEXT_TOKENS';
export * from './ITranslationEvents';
export * from './ITranslationService';
export * from './I18NextEvents';
export * from './models';
export function resolver(activatedRouteSnapshot, routerStateSnapshot) {
    let namespaces = [];
    namespaces =
        (activatedRouteSnapshot.data &&
            activatedRouteSnapshot.data.i18nextNamespaces) ||
            namespaces;
    // @ts-ignore
    return this.loadNamespaces(namespaces.filter((n) => n));
}
export function i18nextNamespaceResolverFactory(i18next) {
    return resolver.bind(i18next);
}
const i18nextGlobal = i18n.default;
export class I18NextModule {
    static forRoot(params = {}) {
        return {
            ngModule: I18NextModule,
            providers: [{
                    provide: I18NEXT_INSTANCE,
                    useValue: i18nextGlobal,
                },
                {
                    provide: I18NEXT_SERVICE,
                    useFactory: (errHandle, i18nextInstance) => new I18NextService(errHandle, i18nextInstance),
                    deps: [
                        I18NEXT_ERROR_HANDLING_STRATEGY,
                        I18NEXT_INSTANCE
                    ]
                },
                {
                    provide: I18NEXT_ERROR_HANDLING_STRATEGY,
                    useClass: params.errorHandlingStrategy || NativeErrorHandlingStrategy,
                },
                I18NextService,
                I18NextPipe,
                I18NextCapPipe,
                I18NextFormatPipe,
                I18NextTitle,
                I18NextEagerPipe,
                {
                    provide: I18NEXT_NAMESPACE_RESOLVER,
                    useFactory: i18nextNamespaceResolverFactory,
                    deps: [I18NEXT_SERVICE],
                },],
        };
    }
    static interpolationFormat(customFormat = null) {
        function formatDelegate(value, format, lng, options) {
            let formatedValue = defaultInterpolationFormat(value, format, lng);
            if (customFormat === null)
                return formatedValue;
            return customFormat(formatedValue, format, lng);
        }
        return formatDelegate;
    }
}
I18NextModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "15.0.4", ngImport: i0, type: I18NextModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });
I18NextModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: "14.0.0", version: "15.0.4", ngImport: i0, type: I18NextModule, declarations: [I18NextPipe,
        I18NextCapPipe,
        I18NextFormatPipe,
        I18NextEagerPipe], exports: [I18NextPipe, I18NextCapPipe, I18NextFormatPipe, I18NextEagerPipe] });
I18NextModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: "12.0.0", version: "15.0.4", ngImport: i0, type: I18NextModule, providers: [
        {
            provide: I18NEXT_NAMESPACE,
            useValue: '',
        },
        {
            provide: I18NEXT_SCOPE,
            useValue: '',
        },
        I18NextPipe,
        I18NextCapPipe,
        I18NextFormatPipe,
        I18NextTitle,
        I18NextEagerPipe,
    ] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "15.0.4", ngImport: i0, type: I18NextModule, decorators: [{
            type: NgModule,
            args: [{
                    providers: [
                        {
                            provide: I18NEXT_NAMESPACE,
                            useValue: '',
                        },
                        {
                            provide: I18NEXT_SCOPE,
                            useValue: '',
                        },
                        I18NextPipe,
                        I18NextCapPipe,
                        I18NextFormatPipe,
                        I18NextTitle,
                        I18NextEagerPipe,
                    ],
                    declarations: [
                        I18NextPipe,
                        I18NextCapPipe,
                        I18NextFormatPipe,
                        I18NextEagerPipe,
                    ],
                    exports: [I18NextPipe, I18NextCapPipe, I18NextFormatPipe, I18NextEagerPipe],
                }]
        }] });
export function defaultInterpolationFormat(value, format, lng) {
    if (!value)
        return value;
    switch (format) {
        case 'upper':
        case 'uppercase':
            return value.toUpperCase();
        case 'lower':
        case 'lowercase':
            return value.toLowerCase();
        case 'cap':
        case 'capitalize':
            return value.charAt(0).toUpperCase() + value.slice(1);
        case null:
        case undefined:
        case 'none':
        default:
            return value;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvbGliL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBdUIsUUFBUSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzlELE9BQU8sS0FBSyxJQUFJLE1BQU0sU0FBUyxDQUFDO0FBRWhDLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUNsRCxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUN0RCxPQUFPLEVBQWdDLDJCQUEyQixFQUFFLE1BQU0sa0NBQWtDLENBQUM7QUFDN0csT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFFeEQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUM1QyxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDbEQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzlDLE9BQU8sRUFDTCwrQkFBK0IsRUFDL0IsaUJBQWlCLEVBQUUsMEJBQTBCLEVBQUUsYUFBYSxFQUM1RCxlQUFlLEVBQ2hCLE1BQU0sa0JBQWtCLENBQUM7QUFFMUIsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sa0JBQWtCLENBQUM7O0FBSXBELGNBQWMsa0JBQWtCLENBQUM7QUFDakMsY0FBYyxvQkFBb0IsQ0FBQztBQUNuQyxjQUFjLGtDQUFrQyxDQUFDO0FBQ2pELGNBQWMscUJBQXFCLENBQUM7QUFDcEMsY0FBYyxxQkFBcUIsQ0FBQztBQUNwQyxjQUFjLHVCQUF1QixDQUFDO0FBQ3RDLGNBQWMsZUFBZSxDQUFDO0FBQzlCLGNBQWMsa0JBQWtCLENBQUM7QUFDakMsY0FBYyxnQkFBZ0IsQ0FBQztBQUMvQixjQUFjLGtCQUFrQixDQUFDO0FBQ2pDLGNBQWMsc0JBQXNCLENBQUM7QUFDckMsY0FBYyx1QkFBdUIs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RUFBRSxhQUFhOzRCQUN0QixRQUFRLEVBQUUsRUFBRTt5QkFDYjt3QkFDRCxXQUFXO3dCQUNYLGNBQWM7d0JBQ2QsaUJBQWlCO3dCQUNqQixZQUFZO3dCQUNaLGdCQUFnQjtxQkFDakI7b0JBQ0QsWUFBWSxFQUFFO3dCQUNaLFdBQVc7d0JBQ1gsY0FBYzt3QkFDZCxpQkFBaUI7d0JBQ2pCLGdCQUFnQjtxQkFDakI7b0JBQ0QsT0FBTyxFQUFFLENBQUMsV0FBVyxFQUFFLGNBQWMsRUFBRSxpQkFBaUIsRUFBRSxnQkFBZ0IsQ0FBQztpQkFDNUU7O0FBd0RELE1BQU0sVUFBVSwwQkFBMEIsQ0FDeEMsS0FBVSxFQUNWLE1BQWUsRUFDZixHQUFZO0lBRVosSUFBSSxDQUFDLEtBQUs7UUFBRSxPQUFPLEtBQUssQ0FBQztJQUN6QixRQUFRLE1BQU0sRUFBRTtRQUNkLEtBQUssT0FBTyxDQUFDO1FBQ2IsS0FBSyxXQUFXO1lBQ2QsT0FBTyxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDN0IsS0FBSyxPQUFPLENBQUM7UUFDYixLQUFLLFdBQVc7WUFDZCxPQUFPLEtBQUssQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUM3QixLQUFLLEtBQUssQ0FBQztRQUNYLEtBQUssWUFBWTtZQUNmLE9BQU8sS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3hELEtBQUssSUFBSSxDQUFDO1FBQ1YsS0FBSyxTQUFTLENBQUM7UUFDZixLQUFLLE1BQU0sQ0FBQztRQUNaO1lBQ0UsT0FBTyxLQUFLLENBQUM7S0FDaEI7QUFDSCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9kdWxlV2l0aFByb3ZpZGVycywgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0ICogYXMgaTE4biBmcm9tICdpMThuZXh0JztcclxuaW1wb3J0IHsgRm9ybWF0RnVuY3Rpb24sIEludGVycG9sYXRpb25PcHRpb25zIH0gZnJvbSAnaTE4bmV4dCc7XHJcbmltcG9ydCB7IEkxOE5leHRDYXBQaXBlIH0gZnJvbSAnLi9JMThOZXh0Q2FwUGlwZSc7XHJcbmltcG9ydCB7IEkxOE5leHRFYWdlclBpcGUgfSBmcm9tICcuL0kxOE5leHRFYWdlclBpcGUnO1xyXG5pbXBvcnQgeyBJMThOZXh0RXJyb3JIYW5kbGluZ1N0cmF0ZWd5LCBOYXRpdmVFcnJvckhhbmRsaW5nU3RyYXRlZ3kgfSBmcm9tICcuL0kxOE5leHRFcnJvckhhbmRsaW5nU3RyYXRlZ2llcyc7XHJcbmltcG9ydCB7IEkxOE5leHRGb3JtYXRQaXBlIH0gZnJvbSAnLi9JMThOZXh0Rm9ybWF0UGlwZSc7XHJcbmltcG9ydCB7IEkxOE5leHRNb2R1bGVQYXJhbXMgfSBmcm9tICcuL0kxOE5leHRNb2R1bGVQYXJhbXMnO1xyXG5pbXBvcnQgeyBJMThOZXh0UGlwZSB9IGZyb20gJy4vSTE4TmV4dFBpcGUnO1xyXG5pbXBvcnQgeyBJMThOZXh0U2VydmljZSB9IGZyb20gJy4vSTE4TmV4dFNlcnZpY2UnO1xyXG5pbXBvcnQgeyBJMThOZXh0VGl0bGUgfSBmcm9tICcuL0kxOE5leHRUaXRsZSc7XHJcbmltcG9ydCB7XHJcbiAgSTE4TkVYVF9FUlJPUl9IQU5ETElOR19TVFJBVEVHWSxcclxuICBJMThORVhUX05BTUVTUEFDRSwgSTE4TkVYVF9OQU1FU1BBQ0VfUkVTT0xWRVIsIEkxOE5FWFRfU0NPUEUsXHJcbiAgSTE4TkVYVF9TRVJWSUNFXHJcbn0gZnJvbSAnLi9JMThORVhUX1RPS0VOUyc7XHJcbmltcG9ydCB7IElUcmFuc2xhdGlvblNlcnZpY2UgfSBmcm9tICcuL0lUcmFuc2xhdGlvblNlcnZpY2UnO1xyXG5pbXBvcnQgeyBJMThORVhUX0lOU1RBTkNFIH0gZnJvbSAnLi9JMThORVhUX1RPS0VOUyc7XHJcblxyXG5cclxuXHJcbmV4cG9ydCAqIGZyb20gJy4vSTE4TmV4dENhcFBpcGUnO1xyXG5leHBvcnQgKiBmcm9tICcuL0kxOE5leHRFYWdlclBpcGUnO1xyXG5leHBvcnQgKiBmcm9tICcuL0kxOE5leHRFcnJvckhhbmRsaW5nU3RyYXRlZ2llcyc7XHJcbmV4cG9ydCAqIGZyb20gJy4vSTE4TmV4dEZvcm1hdFBpcGUnO1xyXG5leHBvcnQgKiBmcm9tICcuL0kxOE5leHRMb2FkUmVzdWx0JztcclxuZXhwb3J0ICogZnJvbSAnLi9JMThOZXh0TW9kdWxlUGFyYW1zJztcclxuZXhwb3J0ICogZnJvbSAnLi9JMThOZXh0UGlwZSc7XHJcbmV4cG9ydCAqIGZyb20gJy4vSTE4TmV4dFNlcnZpY2UnO1xyXG5leHBvcnQgKiBmcm9tICcuL0kxOE5leHRUaXRsZSc7XHJcbmV4cG9ydCAqIGZyb20gJy4vSTE4TkVYVF9UT0tFTlMnO1xyXG5leHBvcnQgKiBmcm9tICcuL0lUcmFuc2xhdGlvbkV2ZW50cyc7XHJcbmV4cG9ydCAqIGZyb20gJy4vSVRyYW5zbGF0aW9uU2VydmljZSc7XHJcbmV4cG9ydCAqIGZyb20gJy4vSTE4TmV4dEV2ZW50cyc7XHJcbmV4cG9ydCAqIGZyb20gJy4vbW9kZWxzJztcclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZXIoXHJcbiAgYWN0aXZhdGVkUm91dGVTbmFwc2hvdDogYW55LFxyXG4gIHJvdXRlclN0YXRlU25hcHNob3Q6IGFueVxyXG4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICBsZXQgbmFtZXNwYWNlczogc3RyaW5nW10gPSBbXTtcclxuICBuYW1lc3BhY2VzID1cclxuICAgIChhY3RpdmF0ZWRSb3V0ZVNuYXBzaG90LmRhdGEgJiZcclxuICAgICAgYWN0aXZhdGVkUm91dGVTbmFwc2hvdC5kYXRhLmkxOG5leHROYW1lc3BhY2VzKSB8fFxyXG4gICAgbmFtZXNwYWNlcztcclxuICAvLyBAdHMtaWdub3JlXHJcbiAgcmV0dXJuIHRoaXMubG9hZE5hbWVzcGFjZXMobmFtZXNwYWNlcy5maWx0ZXIoKG4pID0+IG4pKTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gaTE4bmV4dE5hbWVzcGFjZVJlc29sdmVyRmFjdG9yeShpMThuZXh0OiBJVHJhbnNsYXRpb25TZXJ2aWNlKSB7XHJcbiAgcmV0dXJuIHJlc29sdmVyLmJpbmQoaTE4bmV4dCk7XHJcbn1cclxuXHJcbmNvbnN0IGkxOG5leHRHbG9iYWw6IGkxOG4uaTE4biA9IGkxOG4uZGVmYXVsdDtcclxuXHJcbkBOZ01vZHVsZSh7XHJcbiAgcHJvdmlkZXJzOiBbXHJcbiAgICB7XHJcbiAgICAgIHByb3ZpZGU6IEkxOE5FWFRfTkFNRVNQQUNFLFxyXG4gICAgICB1c2VWYWx1ZTogJycsXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBwcm92aWRlOiBJMThORVhUX1NDT1BFLFxyXG4gICAgICB1c2VWYWx1ZTogJycsXHJcbiAgICB9LFxyXG4gICAgSTE4TmV4dFBpcGUsXHJcbiAgICBJMThOZXh0Q2FwUGlwZSxcclxuICAgIEkxOE5leHRGb3JtYXRQaXBlLFxyXG4gICAgSTE4TmV4dFRpdGxlLFxyXG4gICAgSTE4TmV4dEVhZ2VyUGlwZSxcclxuICBdLFxyXG4gIGRlY2xhcmF0aW9uczogW1xyXG4gICAgSTE4TmV4dFBpcGUsXHJcbiAgICBJMThOZXh0Q2FwUGlwZSxcclxuICAgIEkxOE5leHRGb3JtYXRQaXBlLFxyXG4gICAgSTE4TmV4dEVhZ2VyUGlwZSxcclxuICBdLFxyXG4gIGV4cG9ydHM6IFtJMThOZXh0UGlwZSwgSTE4TmV4dENhcFBpcGUsIEkxOE5leHRGb3JtYXRQaXBlLCBJMThOZXh0RWFnZXJQaXBlXSxcclxufSlcclxuZXhwb3J0IGNsYXNzIEkxOE5leHRNb2R1bGUge1xyXG4gIHN0YXRpYyBmb3JSb290KFxyXG4gICAgcGFyYW1zOiBJMThOZXh0TW9kdWxlUGFyYW1zID0ge31cclxuICApOiBNb2R1bGVXaXRoUHJvdmlkZXJzPEkxOE5leHRNb2R1bGU+IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5nTW9kdWxlOiBJMThOZXh0TW9kdWxlLFxyXG4gICAgICBwcm92aWRlcnM6IFt7XHJcbiAgICAgICAgcHJvdmlkZTogSTE4TkVYVF9JTlNUQU5DRSxcclxuICAgICAgICB1c2VWYWx1ZTogaTE4bmV4dEdsb2JhbCxcclxuICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBwcm92aWRlOiBJMThORVhUX1NFUlZJQ0UsXHJcbiAgICAgICAgICB1c2VGYWN0b3J5OiAoZXJySGFuZGxlOiBJMThOZXh0RXJyb3JIYW5kbGluZ1N0cmF0ZWd5LCBpMThuZXh0SW5zdGFuY2U6IGkxOG4uaTE4bikgPT4gbmV3IEkxOE5leHRTZXJ2aWNlKGVyckhhbmRsZSwgaTE4bmV4dEluc3RhbmNlKSxcclxuICAgICAgICAgIGRlcHM6IFtcclxuICAgICAgICAgICAgSTE4TkVYVF9FUlJPUl9IQU5ETElOR19TVFJBVEVHWSxcclxuICAgICAgICAgICAgSTE4TkVYVF9JTlNUQU5DRVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcHJvdmlkZTogSTE4TkVYVF9FUlJPUl9IQU5ETElOR19TVFJBVEVHWSxcclxuICAgICAgICAgIHVzZUNsYXNzOiBwYXJhbXMuZXJyb3JIYW5kbGluZ1N0cmF0ZWd5IHx8IE5hdGl2ZUVycm9ySGFuZGxpbmdTdHJhdGVneSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIEkxOE5leHRTZXJ2aWNlLFxyXG4gICAgICAgIEkxOE5leHRQaXBlLFxyXG4gICAgICAgIEkxOE5leHRDYXBQaXBlLFxyXG4gICAgICAgIEkxOE5leHRGb3JtYXRQaXBlLFxyXG4gICAgICAgIEkxOE5leHRUaXRsZSxcclxuICAgICAgICBJMThOZXh0RWFnZXJQaXBlLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHByb3ZpZGU6IEkxOE5FWFRfTkFNRVNQQUNFX1JFU09MVkVSLFxyXG4gICAgICAgICAgdXNlRmFjdG9yeTogaTE4bmV4dE5hbWVzcGFjZVJlc29sdmVyRmFjdG9yeSxcclxuICAgICAgICAgIGRlcHM6IFtJMThORVhUX1NFUlZJQ0VdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIF0sXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGludGVycG9sYXRpb25Gb3JtYXQoY3VzdG9tRm9ybWF0OiBGdW5jdGlvbiB8IG51bGwgPSBudWxsKTogRm9ybWF0RnVuY3Rpb24ge1xyXG4gICAgZnVuY3Rpb24gZm9ybWF0RGVsZWdhdGUodmFsdWU6IGFueSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdD86IHN0cmluZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxuZz86IHN0cmluZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnM/OiBJbnRlcnBvbGF0aW9uT3B0aW9ucyAmIHsgW2tleTogc3RyaW5nXTogYW55IH1cclxuICAgICk6IHN0cmluZyB7XHJcbiAgICAgIGxldCBmb3JtYXRlZFZhbHVlOiBzdHJpbmcgPSBkZWZhdWx0SW50ZXJwb2xhdGlvbkZvcm1hdChcclxuICAgICAgICB2YWx1ZSxcclxuICAgICAgICBmb3JtYXQsXHJcbiAgICAgICAgbG5nXHJcbiAgICAgICk7XHJcbiAgICAgIGlmIChjdXN0b21Gb3JtYXQgPT09IG51bGwpIHJldHVybiBmb3JtYXRlZFZhbHVlO1xyXG4gICAgICByZXR1cm4gY3VzdG9tRm9ybWF0KGZvcm1hdGVkVmFsdWUsIGZvcm1hdCwgbG5nKTtcclxuICAgIH1cclxuICAgIHJldHVybiBmb3JtYXREZWxlZ2F0ZTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0SW50ZXJwb2xhdGlvbkZvcm1hdChcclxuICB2YWx1ZTogYW55LFxyXG4gIGZvcm1hdD86IHN0cmluZyxcclxuICBsbmc/OiBzdHJpbmdcclxuKTogc3RyaW5nIHtcclxuICBpZiAoIXZhbHVlKSByZXR1cm4gdmFsdWU7XHJcbiAgc3dpdGNoIChmb3JtYXQpIHtcclxuICAgIGNhc2UgJ3VwcGVyJzpcclxuICAgIGNhc2UgJ3VwcGVyY2FzZSc6XHJcbiAgICAgIHJldHVybiB2YWx1ZS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgY2FzZSAnbG93ZXInOlxyXG4gICAgY2FzZSAnbG93ZXJjYXNlJzpcclxuICAgICAgcmV0dXJuIHZhbHVlLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBjYXNlICdjYXAnOlxyXG4gICAgY2FzZSAnY2FwaXRhbGl6ZSc6XHJcbiAgICAgIHJldHVybiB2YWx1ZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHZhbHVlLnNsaWNlKDEpO1xyXG4gICAgY2FzZSBudWxsOlxyXG4gICAgY2FzZSB1bmRlZmluZWQ6XHJcbiAgICBjYXNlICdub25lJzpcclxuICAgIGRlZmF1bHQ6XHJcbiAgICAgIHJldHVybiB2YWx1ZTtcclxuICB9XHJcbn1cclxuIl19